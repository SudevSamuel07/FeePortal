<!DOCTYPE html>
<html lang="en">
<head>         
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Emmanuel School of Theology - Fee Management</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    
    <!-- Firebase SDKs -->
    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js';
        import { getFirestore, collection, addDoc, getDocs, deleteDoc, doc, query, orderBy, onSnapshot } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js';
        import { getAuth, signInWithEmailAndPassword, signInAnonymously, signOut, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js';

        // Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyBTQZU2ZRGnPFpEBAyI9fCbzNcYJW1_c6I",
            authDomain: "fir-app-28de8.firebaseapp.com",
            projectId: "fir-app-28de8",
            storageBucket: "fir-app-28de8.firebasestorage.app",
            messagingSenderId: "726242395842",
            appId: "1:726242395842:web:e54b3afb24bb2eb94b4c3a",
            measurementId: "G-T8H2VLF81Q"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);

        // Make Firebase available globally
        window.db = db;
        window.auth = auth;
        window.firebase = {
            collection,
            addDoc,
            getDocs,
            deleteDoc,
            doc,
            query,
            orderBy,
            onSnapshot,
            signInWithEmailAndPassword,
            signInAnonymously,
            signOut,
            onAuthStateChanged
        };
    </script>
    
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .tab-button.active {
            border-bottom-color: #3b82f6;
            color: #3b82f6;
        }
    </style>
</head>

<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    
    <!-- Login Screen -->
    <div id="loginScreen" class="min-h-screen flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl shadow-xl p-8 w-full max-w-md">
            <!-- Logo -->
            <div class="text-center mb-6">
                <div class="mx-auto w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mb-4">
                    <img id="loginLogo" src="logo.png" alt="Logo" class="w-16 h-16 object-contain rounded-full" 
                         onerror="this.onerror=null; this.src='./logo.png';" />
                </div>
                <h1 class="text-2xl font-bold text-gray-800">Emmanuel School of Theology</h1>
                <p class="text-gray-600">Student Fee Management Portal</p>
            </div>

            <!-- Login Form -->
            <form id="loginForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Admin Email</label>
                    <input type="email" id="adminEmail" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="adminPassword" required 
                           class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                </div>
                <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200">
                    Login as Admin
                </button>
            </form>

            <div class="mt-4 text-center">
                <button id="guestBtn" class="text-blue-600 hover:text-blue-800 underline">
                    Continue as Guest (View Only)
                </button>
            </div>

            <div id="loginError" class="mt-4 text-red-600 text-sm text-center hidden">
                Invalid credentials. Please try again.
            </div>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" class="hidden">
        <!-- Header -->
        <header class="bg-white shadow-sm mb-6">
            <div class="max-w-6xl mx-auto px-4 py-4 flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <img id="headerLogo" src="logo.png" alt="Logo" class="w-10 h-10 object-contain rounded-full" 
                         onerror="this.onerror=null; this.src='./logo.png';" />
                    <div>
                        <h1 class="text-xl font-bold text-gray-800">Emmanuel School of Theology</h1>
                        <p class="text-sm text-gray-600">Student Fee Management Portal</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <span id="userRole" class="text-sm text-gray-600 px-3 py-1 bg-gray-100 rounded-full"></span>
                    <button id="logoutBtn" class="text-sm text-red-600 hover:text-red-800 px-3 py-2 border border-red-200 rounded-lg hover:bg-red-50">
                        Logout
                    </button>
                </div>
            </div>
        </header>

        <!-- Tab Navigation -->
        <div class="max-w-6xl mx-auto px-4 mb-6">
            <div class="border-b border-gray-200">
                <nav class="-mb-px flex space-x-8" id="tabContainer">
                    <button id="addRecordTab" class="tab-button py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm">
                        Add New Record
                    </button>
                    <button id="paymentHistoryTab" class="tab-button py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 font-medium text-sm">
                        Payment History
                    </button>
                </nav>
            </div>
        </div>

        <!-- Content Area -->
        <div class="max-w-6xl mx-auto px-4">
            
            <!-- Add New Record Tab -->
            <div id="addRecordContent" class="tab-content active">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h2 class="text-lg font-semibold text-gray-800 mb-6">Add New Fee Record</h2>
                    
                    <form id="feeForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Receipt Number</label>
                            <input type="text" id="receiptNo" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Student Name</label>
                            <input type="text" id="studentName" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Amount Paid</label>
                            <input type="number" id="amountPaid" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Amount in Words</label>
                            <input type="text" id="amountInWords" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Towards</label>
                            <select id="towards" required 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                                <option value="">Select...</option>
                                <option value="admission-fee">Admission Fee</option>
                                <option value="semester-fee">Semester Fee</option>
                                <option value="exam-fee">Exam Fee</option>
                                <option value="library-fee">Library Fee</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Fee Date</label>
                            <input type="date" id="feeDate" required 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
                        </div>
                        
                        <div class="md:col-span-2">
                            <button type="submit" class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition duration-200">
                                Add Record & Generate PDF
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <!-- Payment History Tab -->
            <div id="paymentHistoryContent" class="tab-content">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-lg font-semibold text-gray-800">Payment History</h2>
                        <div class="text-sm text-gray-600">
                            Total Records: <span id="recordCount">0</span>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Receipt No</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Student Name</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Amount</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Towards</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th>
                                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                                </tr>
                            </thead>
                            <tbody id="paymentTableBody" class="bg-white divide-y divide-gray-200">
                                <!-- Records will be loaded here -->
                            </tbody>
                        </table>
                    </div>
                    
                    <div id="noRecords" class="text-center py-8 text-gray-500 hidden">
                        No payment records found.
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4">
            <div class="text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4">
                    <svg class="h-6 w-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                    </svg>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">Success!</h3>
                <p class="text-sm text-gray-600 mb-4">Record has been added successfully and PDF generated.</p>
                <button id="closeSuccessModal" class="w-full bg-green-600 text-white py-2 px-4 rounded-lg hover:bg-green-700">
                    OK
                </button>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="deleteModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 max-w-sm w-full mx-4">
            <div class="text-center">
                <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4">
                    <svg class="h-6 w-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path>
                    </svg>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">Delete Record</h3>
                <p class="text-sm text-gray-600 mb-4">Are you sure you want to delete this payment record? This action cannot be undone.</p>
                <div class="flex space-x-3">
                    <button id="cancelDelete" class="flex-1 bg-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-400">
                        Cancel
                    </button>
                    <button id="confirmDelete" class="flex-1 bg-red-600 text-white py-2 px-4 rounded-lg hover:bg-red-700">
                        Delete
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentUser = null;
        let isAdmin = false;
        let recordToDelete = null;

        // Wait for Firebase to be available
        window.addEventListener('load', function() {
            setTimeout(initializeApp, 500); // Small delay to ensure Firebase is loaded
        });

        function initializeApp() {
            if (!window.firebase || !window.auth) {
                console.log('Firebase not ready, retrying...');
                setTimeout(initializeApp, 500);
                return;
            }

            // Initialize authentication state listener
            window.firebase.onAuthStateChanged(window.auth, (user) => {
                if (user) {
                    currentUser = user;
                    isAdmin = !user.isAnonymous;
                    showMainApp();
                } else {
                    showLoginScreen();
                }
            });

            // Event listeners
            setupEventListeners();
        }

        function setupEventListeners() {
            // Login form
            document.getElementById('loginForm').addEventListener('submit', handleLogin);
            document.getElementById('guestBtn').addEventListener('click', handleGuestLogin);
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);

            // Tab navigation
            document.getElementById('addRecordTab').addEventListener('click', () => showTab('addRecord'));
            document.getElementById('paymentHistoryTab').addEventListener('click', () => showTab('paymentHistory'));

            // Fee form
            document.getElementById('feeForm').addEventListener('submit', handleFeeSubmit);

            // Modals
            document.getElementById('closeSuccessModal').addEventListener('click', closeSuccessModal);
            document.getElementById('cancelDelete').addEventListener('click', closeDeleteModal);
            document.getElementById('confirmDelete').addEventListener('click', confirmDeleteRecord);

            // Auto-populate today's date
            document.getElementById('feeDate').valueAsDate = new Date();
        }

        async function handleLogin(e) {
            e.preventDefault();
            const email = document.getElementById('adminEmail').value;
            const password = document.getElementById('adminPassword').value;
            const errorDiv = document.getElementById('loginError');

            try {
                await window.firebase.signInWithEmailAndPassword(window.auth, email, password);
                errorDiv.classList.add('hidden');
            } catch (error) {
                console.error('Login error:', error);
                errorDiv.textContent = 'Invalid credentials. Please try again.';
                errorDiv.classList.remove('hidden');
            }
        }

        async function handleGuestLogin() {
            try {
                await window.firebase.signInAnonymously(window.auth);
            } catch (error) {
                console.error('Guest login error:', error);
            }
        }

        async function handleLogout() {
            try {
                await window.firebase.signOut(window.auth);
            } catch (error) {
                console.error('Logout error:', error);
            }
        }

        function showLoginScreen() {
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('mainApp').classList.add('hidden');
            currentUser = null;
            isAdmin = false;
        }

        function showMainApp() {
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            
            // Update user role display
            const roleSpan = document.getElementById('userRole');
            roleSpan.textContent = isAdmin ? 'Admin' : 'Guest (Read Only)';
            
            // Show/hide admin-only elements
            const adminElements = document.querySelectorAll('.admin-only');
            adminElements.forEach(el => {
                if (isAdmin) {
                    el.classList.remove('hidden');
                } else {
                    el.classList.add('hidden');
                }
            });

            // Load payment history if on that tab
            if (document.getElementById('paymentHistoryContent').classList.contains('active')) {
                loadPaymentHistory();
            }

            // Set default tab
            showTab('addRecord');
        }

        function showTab(tabName) {
            // Hide all tab contents
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });

            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active');
            });

            // Show selected tab content
            document.getElementById(tabName + 'Content').classList.add('active');
            document.getElementById(tabName + 'Tab').classList.add('active');

            // Load data if needed
            if (tabName === 'paymentHistory') {
                loadPaymentHistory();
            }
        }

        async function handleFeeSubmit(e) {
            e.preventDefault();

            if (!isAdmin) {
                alert('Only admin can add records.');
                return;
            }

            const formData = {
                receiptNo: document.getElementById('receiptNo').value,
                name: document.getElementById('studentName').value,
                paid: parseInt(document.getElementById('amountPaid').value),
                amountInWords: document.getElementById('amountInWords').value,
                towards: document.getElementById('towards').value,
                feeDate: document.getElementById('feeDate').value,
                feeDateDisplay: new Date(document.getElementById('feeDate').value).toLocaleDateString(),
                createdAt: new Date()
            };

            try {
                // Add to Firestore
                const docRef = await window.firebase.addDoc(
                    window.firebase.collection(window.db, 'fee_records'), 
                    formData
                );

                // Generate PDF
                generatePDF(formData);

                // Show success modal
                showSuccessModal();

                // Reset form
                document.getElementById('feeForm').reset();
                document.getElementById('feeDate').valueAsDate = new Date();

                // Refresh payment history if visible
                if (document.getElementById('paymentHistoryContent').classList.contains('active')) {
                    loadPaymentHistory();
                }

            } catch (error) {
                console.error('Error adding record:', error);
                alert('Error adding record. Please try again.');
            }
        }

        async function loadPaymentHistory() {
            try {
                const q = window.firebase.query(
                    window.firebase.collection(window.db, 'fee_records'),
                    window.firebase.orderBy('createdAt', 'desc')
                );
                
                const querySnapshot = await window.firebase.getDocs(q);
                const tbody = document.getElementById('paymentTableBody');
                tbody.innerHTML = '';

                if (querySnapshot.empty) {
                    document.getElementById('noRecords').classList.remove('hidden');
                    document.getElementById('recordCount').textContent = '0';
                    return;
                }

                document.getElementById('noRecords').classList.add('hidden');
                document.getElementById('recordCount').textContent = querySnapshot.size;

                querySnapshot.forEach((doc) => {
                    const data = doc.data();
                    const row = createTableRow(doc.id, data);
                    tbody.appendChild(row);
                });

            } catch (error) {
                console.error('Error loading payment history:', error);
            }
        }

        function createTableRow(docId, data) {
            const row = document.createElement('tr');
            row.innerHTML = `
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">${data.receiptNo}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.name}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">₹${data.paid}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.towards}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900">${data.feeDateDisplay}</td>
                <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                    <button onclick="generatePDF(${JSON.stringify(data).replace(/"/g, '&quot;')})" 
                            class="text-blue-600 hover:text-blue-900 mr-3">View PDF</button>
                    ${isAdmin ? `<button onclick="deleteRecord('${docId}')" 
                                        class="text-red-600 hover:text-red-900 admin-only">Delete</button>` : ''}
                </td>
            `;
            return row;
        }

        function generatePDF(data) {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            // Add logo
            const logoImg = document.getElementById('headerLogo');
            if (logoImg && logoImg.complete && logoImg.naturalWidth > 0) {
                try {
                    const canvas = document.createElement('canvas');
                    const ctx = canvas.getContext('2d');
                    canvas.width = 40;
                    canvas.height = 40;
                    
                    // Draw circular background
                    ctx.beginPath();
                    ctx.arc(20, 20, 20, 0, 2 * Math.PI);
                    ctx.fillStyle = '#f3f4f6';
                    ctx.fill();
                    
                    // Draw image
                    ctx.save();
                    ctx.beginPath();
                    ctx.arc(20, 20, 18, 0, 2 * Math.PI);
                    ctx.clip();
                    ctx.drawImage(logoImg, 2, 2, 36, 36);
                    ctx.restore();
                    
                    const logoDataUrl = canvas.toDataURL('image/png');
                    doc.addImage(logoDataUrl, 'PNG', 85, 10, 40, 40);
                } catch (e) {
                    console.log('Could not add logo to PDF');
                }
            }

            // Header
            doc.setFontSize(20);
            doc.setFont(undefined, 'bold');
            doc.text('Emmanuel School of Theology', 105, 65, { align: 'center' });
            
            doc.setFontSize(14);
            doc.setFont(undefined, 'normal');
            doc.text('Student Fee Management Portal', 105, 75, { align: 'center' });
            
            doc.setFontSize(16);
            doc.setFont(undefined, 'bold');
            doc.text('Fee Receipt', 105, 90, { align: 'center' });

            // Receipt details
            doc.setFontSize(12);
            doc.setFont(undefined, 'normal');
            
            const startY = 110;
            const lineHeight = 15;
            
            doc.text(`Receipt Number: ${data.receiptNo}`, 20, startY);
            doc.text(`Student Name: ${data.name}`, 20, startY + lineHeight);
            doc.text(`Amount Paid: ₹${data.paid}`, 20, startY + lineHeight * 2);
            doc.text(`Amount in Words: ${data.amountInWords}`, 20, startY + lineHeight * 3);
            doc.text(`Towards: ${data.towards}`, 20, startY + lineHeight * 4);
            doc.text(`Fee Date: ${data.feeDateDisplay}`, 20, startY + lineHeight * 5);
            
            // Footer
            doc.setFontSize(10);
            doc.text('Thank you for your payment!', 105, startY + lineHeight * 7, { align: 'center' });
            doc.text(`Generated on: ${new Date().toLocaleDateString()}`, 105, startY + lineHeight * 8, { align: 'center' });

            // Save the PDF
            doc.save(`Fee_Receipt_${data.receiptNo}.pdf`);
        }

        function deleteRecord(docId) {
            recordToDelete = docId;
            document.getElementById('deleteModal').classList.remove('hidden');
        }

        async function confirmDeleteRecord() {
            if (!recordToDelete || !isAdmin) return;

            try {
                await window.firebase.deleteDoc(
                    window.firebase.doc(window.db, 'fee_records', recordToDelete)
                );
                
                closeDeleteModal();
                loadPaymentHistory(); // Refresh the table
                
            } catch (error) {
                console.error('Error deleting record:', error);
                alert('Error deleting record. Please try again.');
            }
        }

        function showSuccessModal() {
            document.getElementById('successModal').classList.remove('hidden');
        }

        function closeSuccessModal() {
            document.getElementById('successModal').classList.add('hidden');
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').classList.add('hidden');
            recordToDelete = null;
        }

        // Handle logo loading errors
        document.addEventListener('DOMContentLoaded', function() {
            const logos = ['loginLogo', 'headerLogo'];
            logos.forEach(logoId => {
                const logo = document.getElementById(logoId);
                if (logo) {
                    logo.addEventListener('error', function() {
                        if (this.src.includes('./logo.png')) {
                            this.src = '../logo.png';
                        } else if (this.src.includes('../logo.png')) {
                            // If all attempts fail, hide the logo
                            this.style.display = 'none';
                        }
                    });
                }
            });
        });
    </script>
</body>
</html>
